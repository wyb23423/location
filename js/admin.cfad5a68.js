(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"456d":function(e,t,a){var r=a("4bf8"),o=a("0d58");a("5eda")("keys",function(){return function(e){return o(r(e))}})},"459d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},[a("div",{staticStyle:{"overflow-y":"auto"},style:{height:e.mainHeight}},[a("router-view")],1)]),a("app-aside",{attrs:{tabs:e.tabs}})],1)},o=[],l=a("d225"),n=a("308d"),s=a("6bb5"),i=a("4e2b"),c=a("9ab4"),u=a("2fe1"),p=a("3d13"),m=a("cda1"),f=a("2b0e"),d=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(n["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.tabs=[{title:"管理员",to:"/admin/list",icon:"el-icon-user"},{title:"增加人员",to:"/admin/add",icon:"el-icon-circle-plus-outline"}],e}return Object(i["a"])(t,e),t}(f["default"]);c["a"]([Object(m["a"])("mainHeight")],d.prototype,"mainHeight",void 0),d=c["a"]([Object(u["b"])({components:{"app-aside":p["a"]}})],d);var b=d,h=b,v=a("2877"),g=Object(v["a"])(h,r,o,!1,null,null,null);t["default"]=g.exports},5178:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-left":"5%","padding-top":"3%"}},[a("h3",{staticStyle:{color:"#009688"}},[e._v("管理员基础信息")]),a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"管理者名称：",prop:"adminName"}},[a("el-input",{model:{value:e.form.adminName,callback:function(t){e.$set(e.form,"adminName",t)},expression:"form.adminName"}})],1),a("el-form-item",{attrs:{label:"用户姓名：",prop:"userName"}},[a("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}}),a("el-input",{staticClass:"hidden"})],1),a("el-form-item",{attrs:{label:"登录密码：",prop:"password"}},[a("el-input",{staticClass:"hidden",attrs:{type:"password"}}),a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"所属部门：",prop:"department","inline-message":!0}},[a("el-input",{model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),a("el-form-item",{attrs:{label:"职位",prop:"job","inline-message":!0}},[a("el-input",{model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),a("el-form-item",{attrs:{label:"职位等级",prop:"level"}},[a("el-radio-group",{model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("el-radio",{attrs:{label:"T1"}}),a("el-radio",{attrs:{label:"T2"}}),a("el-radio",{attrs:{label:"T3"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码：",prop:"phone"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"工号：",prop:"workNo"}},[a("el-input",{model:{value:e.form.workNo,callback:function(t){e.$set(e.form,"workNo",t)},expression:"form.workNo"}})],1),e.roles.length?a("el-form-item",{attrs:{label:"权限",prop:"role","inline-message":!0}},[a("el-select",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roles,function(e){return a("el-option",{key:e[0],attrs:{value:e[0],label:e[1]}})}),1)],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)},o=[],l=(a("456d"),a("ac6a"),a("ffc1"),a("d225")),n=a("b0b4"),s=a("308d"),i=a("6bb5"),c=a("4e2b"),u=a("9ab4"),p=a("2fe1"),m=a("2b0e"),f=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(s["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.form={adminName:"",userName:"",password:"",sex:1,department:"",job:"",level:"T1",phone:"",workNo:"",role:"supser"},e.rules={},e.roles=[],e}return Object(c["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){var e=this,t=sessionStorage.getItem("config");t&&(t=JSON.parse(t).roles,t&&(this.roles=Object.entries(t))),this.form.role=this.roles[0]?this.roles[0][0]:"super",Object.keys(this.form).forEach(function(t){if("sex"!==t&&"level"!==t&&"role"!==t){var a=[{required:!0,message:"必填项不能为空",trigger:"change"}];"phone"===t&&a.push({pattern:/^1[3456789]\d{9}$/,message:"无效电话号",trigger:"change"}),e.rules[t]=a}})}},{key:"onSubmit",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(t){var a=Date.now(),r=Object.assign({},e.form,{createTime:a,updateTime:a});e.$http.post("/api/admin/addAdmin",r,{"Content-Type":"application/json"}).then(function(){return e.$message.success("添加成功")}).catch(console.log)}})}},{key:"reset",value:function(){this.$refs.form.resetFields()}}]),t}(m["default"]);f=u["a"]([p["b"]],f);var d=f,b=d,h=a("2877"),v=Object(h["a"])(b,r,o,!1,null,null,null);t["default"]=v.exports},"5eda":function(e,t,a){var r=a("5ca1"),o=a("8378"),l=a("79e5");e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],n={};n[e]=t(a),r(r.S+r.F*l(function(){a(1)}),"Object",n)}},cbd3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"5%",height:"100%"}},[a("el-card",{ref:"table",staticClass:"card"},[a("app-table",{attrs:{"max-height":e.maxHeight,"table-data":e.tableData,"col-cfg":e.colCfg,"total-count":e.totalCount,op:e.op},on:{del:e.del,updateData:e.getData,toExcel:e.toExcel}})],1)],1)},o=[],l=(a("96cf"),a("3b8d")),n=a("d225"),s=a("b0b4"),i=a("308d"),c=a("6bb5"),u=a("4e2b"),p=a("9ab4"),m=a("2fe1"),f=a("ae85"),d=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.colCfg=[{prop:"id",label:"ID",sortable:!0,width:120},{prop:"adminName",label:"管理员名称",width:160},{prop:"sex",label:"性别",width:120},{prop:"department",label:"部门",width:160},{prop:"job",label:"职位",width:160},{prop:"level",label:"等级",sortable:!0,width:120},{prop:"phone",label:"电话号码",width:220},{prop:"workNo",label:"工号",width:120}],e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"del",value:function(e){var t=this;this.$confirm("删除".concat(e.adminName,"?")).then(function(){return t.$http.post("/api/admin/deleteAdmin",{id:e.id})}).then(function(){t.$message.success("删除成功"),t.refresh()}).catch(console.log)}},{key:"fetch",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a){var r,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=[],o=0,e.prev=2,e.next=5,this.$http.get("/api/admin/getall",{pageSize:a,currentPage:t});case 5:l=e.sent,r=l.pagedData.datas.map(function(e){return e.sex=e.sex?"男":"女",e}),o=l.pagedData.totalCount,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:return e.abrupt("return",{count:o,data:r});case 14:case"end":return e.stop()}},e,this,[[2,10]])}));function t(t,a){return e.apply(this,arguments)}return t}()}]),t}(Object(m["c"])(f["a"]));d=p["a"]([m["b"]],d);var b=d,h=b,v=a("2877"),g=Object(v["a"])(h,r,o,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=admin.cfad5a68.js.map