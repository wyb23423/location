(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"1c13":function(t,e,a){t.exports={thead:"Table_thead_gYJvz"}},"3c06":function(t,e,a){"use strict";var n=a("1c13"),r=a.n(n);e["default"]=r.a},"3d13":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.$style.aside,style:{height:t.height}},[a("el-tooltip",{attrs:{effect:"dark",content:t.isCollapse?"展开":"收起",placement:"right"}},[a("div",{class:t.$style.icon,on:{click:t.collapse}},[a("i",{staticClass:"el-icon-menu"})])]),a("el-menu",{staticStyle:{"text-align":"center","border-right":"none"},attrs:{"background-color":"#393d49","text-color":"#fff","active-text-color":"#ffd04b","default-active":t.defaultActive,router:!0,"unique-opened":!0,collapse:t.isCollapse},on:{click:t.collapse}},[t._l(t.tabs,function(e,n){var r;return[e.children?a("el-submenu",{key:e.to,attrs:{index:n+""}},[a("div",{class:(r={},r[t.$style.active]=e.to===t.activeTitle,r),attrs:{slot:"title"},slot:"title"},[a("i",{class:e.icon||"el-icon-paperclip"}),a("span",[t._v(t._s(e.title))])]),t._l(e.children,function(e){return a("el-menu-item",{key:e.to,attrs:{index:e.to}},[e.icon?a("i",{class:e.icon}):t._e(),t._v("\n                    "+t._s(e.title)+"\n                ")])})],2):a("el-menu-item",{key:e.to,attrs:{index:e.to}},[a("i",{class:e.icon||"el-icon-paperclip"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])]})],2)],1)},r=[],i=(a("28a5"),a("d225")),o=a("b0b4"),l=a("308d"),s=a("6bb5"),c=a("4e2b"),u=a("9ab4"),p=a("2b0e"),d=a("2fe1"),f=a("60a3"),b=a("cda1"),h=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(l["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.defaultActive="",t.isCollapse=!0,t.activeTitle="",t}return Object(c["a"])(e,t),Object(o["a"])(e,[{key:"created",value:function(){this.modifyActiveIndex()}},{key:"collapse",value:function(){this.isCollapse=!this.isCollapse}},{key:"modifyActiveIndex",value:function(){if(this.defaultActive=this.$route.path,this.$route.path.split("/").length<3){var t=this.tabs||[];this.defaultActive=this.defaultTo(t)}this.activeTitle=this.defaultActive.split("/")[2]}},{key:"defaultTo",value:function(t){var e=t[0];return e.children&&e.children.length?this.defaultTo(e.children):e.to}}]),e}(p["default"]);u["a"]([Object(b["a"])("mainHeight")],h.prototype,"height",void 0),u["a"]([Object(f["b"])()],h.prototype,"tabs",void 0),u["a"]([Object(f["c"])("$route",{deep:!0})],h.prototype,"modifyActiveIndex",null),h=u["a"]([d["b"]],h);var m=h,v=m,g=a("6138"),y=a("2877");function j(t){this["$style"]=g["default"].locals||g["default"]}var x=Object(y["a"])(v,n,r,!1,j,null,null);e["a"]=x.exports},"456d":function(t,e,a){var n=a("4bf8"),r=a("0d58");a("5eda")("keys",function(){return function(t){return r(n(t))}})},"459d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main"},[a("div",{staticStyle:{"overflow-y":"auto"},style:{height:t.mainHeight}},[a("router-view")],1)]),a("app-aside",{attrs:{tabs:t.tabs}})],1)},r=[],i=a("d225"),o=a("308d"),l=a("6bb5"),s=a("4e2b"),c=a("9ab4"),u=a("2fe1"),p=a("3d13"),d=a("cda1"),f=a("2b0e"),b=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.tabs=[{title:"管理员",to:"/admin/list",icon:"el-icon-user"},{title:"增加人员",to:"/admin/add",icon:"el-icon-circle-plus-outline"}],t}return Object(s["a"])(e,t),e}(f["default"]);c["a"]([Object(d["a"])("mainHeight")],b.prototype,"mainHeight",void 0),b=c["a"]([Object(u["b"])({components:{"app-aside":p["a"]}})],b);var h=b,m=h,v=a("2877"),g=Object(v["a"])(m,n,r,!1,null,null,null);e["default"]=g.exports},5178:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-left":"5%","padding-top":"3%"}},[a("h3",{staticStyle:{color:"#009688"}},[t._v("\n        管理员基础信息\n        ")]),a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:t.form,rules:t.rules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"管理者名称：",prop:"adminName"}},[a("el-input",{model:{value:t.form.adminName,callback:function(e){t.$set(t.form,"adminName",e)},expression:"form.adminName"}})],1),a("el-form-item",{attrs:{label:"用户姓名：",prop:"userName"}},[a("el-input",{model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}}),a("el-input",{staticClass:"hidden"})],1),a("el-form-item",{attrs:{label:"登录密码：",prop:"password"}},[a("el-input",{staticClass:"hidden",attrs:{type:"password"}}),a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),a("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),a("el-form-item",{attrs:{label:"所属部门：",prop:"department","inline-message":!0}},[a("el-select",{attrs:{placeholder:"选择部门"},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}},[a("el-option",{attrs:{value:"技术部"}}),a("el-option",{attrs:{value:"研发部"}}),a("el-option",{attrs:{value:"销售部"}})],1)],1),a("el-form-item",{attrs:{label:"职位",prop:"job","inline-message":!0}},[a("el-select",{attrs:{placeholder:"选择职位"},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}},[a("el-option",{attrs:{value:"技术主管"}}),a("el-option",{attrs:{value:"项目经理",disabled:!0}}),a("el-option",{attrs:{value:"产品经理"}}),a("el-option",{attrs:{value:"技术员"}}),a("el-option",{attrs:{value:"测试"}})],1)],1),a("el-form-item",{attrs:{label:"职位等级",prop:"level"}},[a("el-radio-group",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[a("el-radio",{attrs:{label:"T1"}}),a("el-radio",{attrs:{label:"T2"}}),a("el-radio",{attrs:{label:"T3"}})],1)],1),a("el-form-item",{attrs:{label:"电话号码：",prop:"phone"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",t._n(e))},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"工号：",prop:"workNo"}},[a("el-input",{model:{value:t.form.workNo,callback:function(e){t.$set(t.form,"workNo",e)},expression:"form.workNo"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1)},r=[],i=(a("456d"),a("ac6a"),a("d225")),o=a("b0b4"),l=a("308d"),s=a("6bb5"),c=a("4e2b"),u=a("9ab4"),p=a("2fe1"),d=a("2b0e"),f=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(l["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.form={},t.rules={},t}return Object(c["a"])(e,t),Object(o["a"])(e,[{key:"created",value:function(){var t=this;this.init(),Object.keys(this.form).forEach(function(e){if("sex"!==e&&"level"!==e){var a=[{required:!0,message:"必填项不能为空",trigger:"change"}];"phone"===e&&a.push({pattern:/^1[3456789]\d{9}$/,message:"无效电话号",trigger:"change"}),t.rules[e]=a}})}},{key:"onSubmit",value:function(){var t=this,e=this.$refs.form;e.validate(function(e){if(e){var a=Date.now(),n=Object.assign({},t.form,{createTime:a,updateTime:a,role:"string"});t.$http.post("/api/admin/addAdmin",n,{"Content-Type":"application/json"}).then(function(){t.$message.success("添加成功"),t.init()}).catch(console.log)}})}},{key:"reset",value:function(){this.$refs.form.resetFields(),this.init()}},{key:"init",value:function(){this.form={adminName:"",userName:"",password:"",sex:1,department:"",job:"",level:"T1",phone:"",workNo:""}}}]),e}(d["default"]);f=u["a"]([p["b"]],f);var b=f,h=b,m=a("2877"),v=Object(m["a"])(h,n,r,!1,null,null,null);e["default"]=v.exports},"5eda":function(t,e,a){var n=a("5ca1"),r=a("8378"),i=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],o={};o[t]=e(a),n(n.S+n.F*i(function(){a(1)}),"Object",o)}},6138:function(t,e,a){"use strict";var n=a("c94b"),r=a.n(n);e["default"]=r.a},ae85:function(t,e,a){"use strict";a("ac6a"),a("96cf");var n=a("3b8d"),r=a("d225"),i=a("b0b4"),o=a("308d"),l=a("6bb5"),s=a("4e2b"),c=a("9ab4"),u=a("2b0e"),p=a("2fe1"),d=a("d8c9"),f=a("60a3"),b="data:application/vnd.ms-excel;base64,";function h(t){return window.btoa(decodeURIComponent(encodeURIComponent(t)))}function m(t){return'<html><head><meta charset="UTF-8"></head><body><table border="1">'.concat(t,"</table></body></html>")}function v(t){window.open(b+h(m(t)),"block")}var g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{"margin-bottom":"10px"},attrs:{data:t.tableData,border:!0,"header-row-class-name":t.$style.thead,"max-height":t.maxHeight}},[t._l(t.colCfg,function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,sortable:!!e.sortable,resizable:!0,width:null==e.width?void 0:e.width*t.scale}})}),t.op&&t.op.length?a("el-table-column",{attrs:{label:"操作",fixed:"right",resizable:!0,"min-width":null==t.opWidth?void 0:t.opWidth*t.scale},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex-center"},t._l(t.op,function(n,r){return a("el-button",{key:r,attrs:{size:"mini",type:t._f("parse")(n.type,e.$index)},on:{click:function(a){return t.emit(n.name,e.row,e.$index)}}},[t._v("\n                        "+t._s(t._f("parse")(n.desc,e.$index))+"\n                    ")])}),1)]}}],null,!1,3211734680)}):t._e()],2),a("div",{staticClass:"flex-center",staticStyle:{"justify-content":"space-between"}},[t.noPrint?t._e():a("el-button",{attrs:{size:"mini",icon:"el-icon-printer"},on:{click:function(e){return t.emit("toExcel")}}},[t._v("\n            导出\n        ")]),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,layout:(t.isSmall?"":"sizes, ")+"prev, pager, next",total:t.totalCount,small:!!t.isSmall,"hide-on-single-page":!!t.isSmall,"pager-count":5},on:{"size-change":function(e){return t.updateData("pageSize",e)},"current-change":function(e){return t.updateData("page",e)}}})],1)],1)},y=[],j=a("d70b"),x=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.pageSize=10,t.page=1,t.scale=1,t}return Object(s["a"])(e,t),Object(i["a"])(e,[{key:"emit",value:function(t,e,a){t=O(t,a),this.$emit(t,e,a)}},{key:"updateData",value:function(t,e){var a=this;this[t]=e,this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){return a.$emit("updateData",a.page,a.pageSize)},200)}},{key:"scaleRoot",value:function(){document.body.clientWidth<=j["h"]?this.scale=j["h"]/j["d"]:this.scale=1}}]),e}(u["default"]);c["a"]([Object(f["b"])()],x.prototype,"maxHeight",void 0),c["a"]([Object(f["b"])()],x.prototype,"tableData",void 0),c["a"]([Object(f["b"])()],x.prototype,"totalCount",void 0),c["a"]([Object(f["b"])()],x.prototype,"colCfg",void 0),c["a"]([Object(f["b"])()],x.prototype,"op",void 0),c["a"]([Object(f["b"])()],x.prototype,"noPrint",void 0),c["a"]([Object(f["b"])()],x.prototype,"isSmall",void 0),c["a"]([Object(f["b"])()],x.prototype,"opWidth",void 0),x=c["a"]([Object(p["b"])({filters:{parse:O}})],x);var k=x;function O(t,e){return"string"===typeof t?t:t[e]||t.default||"404"}var w=k,_=a("3c06"),$=a("2877");function C(t){this["$style"]=_["default"].locals||_["default"]}var S=Object($["a"])(w,g,y,!1,C,null,null),D=S.exports,N=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.totalCount=0,t.tableData=[],t.maxHeight=100,t.colCfg=[],t.pageSize=10,t.page=1,t}return Object(s["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){this.getData(1,10)}},{key:"mounted",value:function(){this.getMaxHeight()}},{key:"getData",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.pageSize=a,this.page=e,t.next=4,this.fetch(e,a);case 4:n=t.sent,this.totalCount=n.count,this.tableData=n.data;case 7:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"toExcel",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.bodyStr();case 2:e=t.sent,v(this.headStr()+e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"fetch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{count:0,data:[]});case 1:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"refresh",value:function(t){null==t&&(t=this.tableData.length>1?this.page:this.page-1),this.getData(Math.max(1,t),this.pageSize)}},{key:"getMaxHeight",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$refs.table,!e){t.next=13;break}if(a=e.$el||e,!a){t.next=13;break}return t.prev=4,t.next=7,Object(d["e"])(function(){return!!a.offsetHeight});case 7:this.maxHeight=.85*a.offsetHeight,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[4,10]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"headStr",value:function(){var t=["<thead><tr>"];return this.colCfg.forEach(function(e){return t.push("<th>".concat(e.label,"</th>"))}),t.push("</tr></thead>"),t.join("")}},{key:"bodyStr",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(1,this.totalCount);case 2:return e=t.sent.data,a=["<tbody>"],e.forEach(function(t){a.push("<tr>"),n.colCfg.forEach(function(e){return a.push("<td>".concat(t[e.prop],"</td>"))}),a.push("</tr>")}),a.push("</tbody>"),t.abrupt("return",a.join(""));case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(u["default"]);c["a"]([Object(f["c"])("$store.state.rootScale")],N.prototype,"getMaxHeight",null),N=c["a"]([Object(p["b"])({components:{"app-table":D}})],N);e["a"]=N},c94b:function(t,e,a){t.exports={aside:"Aside_aside_gH4nn",icon:"Aside_icon_3B2Yj",active:"Aside_active_1U2zf"}},cbd3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"5%",height:"100%"}},[a("el-card",{ref:"table",staticClass:"card"},[a("app-table",{attrs:{"max-height":t.maxHeight,"table-data":t.tableData,"col-cfg":t.colCfg,"total-count":t.totalCount,op:[{type:"danger",name:"del",desc:"删除"}]},on:{del:t.del,updateData:t.getData,toExcel:t.toExcel}})],1)],1)},r=[],i=(a("96cf"),a("3b8d")),o=a("d225"),l=a("b0b4"),s=a("308d"),c=a("6bb5"),u=a("4e2b"),p=a("9ab4"),d=a("2fe1"),f=a("ae85"),b=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.colCfg=[{prop:"id",label:"ID",sortable:!0,width:120},{prop:"adminName",label:"管理员名称",width:160},{prop:"sex",label:"性别",width:120},{prop:"department",label:"部门",width:160},{prop:"job",label:"职位",width:160},{prop:"level",label:"等级",sortable:!0,width:120},{prop:"phone",label:"电话号码",width:220},{prop:"workNo",label:"工号",width:120}],t}return Object(u["a"])(e,t),Object(l["a"])(e,[{key:"del",value:function(t){var e=this;this.$confirm("删除".concat(t.adminName,"?")).then(function(){return e.$http.post("/api/admin/deleteAdmin",{id:t.id})}).then(function(){e.$message.success("删除成功"),e.refresh()}).catch(console.log)}},{key:"fetch",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,a){var n,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=[],r=0,t.prev=2,t.next=5,this.$http.get("/api/admin/getall",{pageSize:a,currentPage:e});case 5:i=t.sent,n=i.pagedData.datas.map(function(t){return t.sex=t.sex?"男":"女",t}),r=i.pagedData.totalCount,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:return t.abrupt("return",{count:r,data:n});case 14:case"end":return t.stop()}},t,this,[[2,10]])}));function e(e,a){return t.apply(this,arguments)}return e}()}]),e}(Object(d["c"])(f["a"]));b=p["a"]([d["b"]],b);var h=b,m=h,v=a("2877"),g=Object(v["a"])(m,n,r,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=admin.4918032f.js.map