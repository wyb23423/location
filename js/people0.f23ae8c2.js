(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["people0"],{"0a49":function(e,t,a){var r=a("9b43"),o=a("626a"),l=a("4bf8"),i=a("9def"),n=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,p=4==e,u=6==e,f=5==e||u,d=t||n;return function(t,n,m){for(var v,b,g=l(t),h=o(g),y=r(n,m,3),w=i(h.length),x=0,$=a?d(t,w):s?d(t,0):void 0;w>x;x++)if((f||x in h)&&(v=h[x],b=y(v,x,g),e))if(a)$[x]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:$.push(v)}else if(p)return!1;return u?-1:c||p?p:$}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"42de":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"","default-first-option":"",multiple:!!e.multiple,disabled:!!e.disabled,"collapse-tags":""},on:{change:e.change},model:{value:e.currValue,callback:function(t){e.currValue=t},expression:"currValue"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)},o=[],l=(a("7514"),a("7f7f"),a("ac6a"),a("d225")),i=a("b0b4"),n=a("308d"),s=a("6bb5"),c=a("4e2b"),p=a("9ab4"),u=a("2b0e"),f=a("2fe1"),d=a("60a3"),m=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(n["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.options=[],e.currValue=null,e}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"created",value:function(){var e=this;this.$http.get(this.url,{pageSize:1e6,currentPage:1}).then(function(t){e.options=t.pagedData.datas.map(function(t){return{id:t[e.keys.id||"id"],name:t[e.keys.name],data:t}}),e.multiple?e.currValue=[]:e.currValue=null==e.value||""===e.value?e.options[0].id:e.value}).catch(console.error)}},{key:"change",value:function(e){var t=this;this.$emit("input",e),Array.isArray(e)||(e=[e]),this.$emit("change",e.map(function(e){return t.options.find(function(t){return t.id===e})}))}}]),t}(u["default"]);p["a"]([Object(d["b"])()],m.prototype,"url",void 0),p["a"]([Object(d["b"])()],m.prototype,"value",void 0),p["a"]([Object(d["b"])({default:function(){return{id:"id",name:"name"}}})],m.prototype,"keys",void 0),p["a"]([Object(d["b"])()],m.prototype,"multiple",void 0),p["a"]([Object(d["b"])()],m.prototype,"disabled",void 0),m=p["a"]([f["b"]],m);var v=m,b=v,g=a("2877"),h=Object(g["a"])(b,r,o,!1,null,null,null);t["a"]=h.exports},7514:function(e,t,a){"use strict";var r=a("5ca1"),o=a("0a49")(5),l="find",i=!0;l in[]&&Array(1)[l](function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(l)},8346:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-left":"5%","padding-top":"3%"}},[a("h3",{staticStyle:{color:"#009688"}},[e._v("人员添加")]),a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:e.form,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"头像："}},[a("div",{on:{click:function(t){e.visible=!0}}},[a("el-tooltip",{attrs:{effect:"dark",content:"修改头像",placement:"bottom-end"}},[a("el-image",{class:e.$style.avatar,attrs:{src:e.form.avatar||"/images/true.png",fit:"contain"}})],1)],1)]),a("el-form-item",{attrs:{label:"人员名称：",prop:"name",required:""}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"部门：",prop:"department",required:""}},[a("el-input",{model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),a("el-form-item",{attrs:{label:"职位：",prop:"job",required:""}},[a("el-input",{model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),a("el-form-item",{attrs:{label:"带领人："}},[a("el-input",{model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1),a("el-form-item",{attrs:{label:"区域"}},[a("app-select",{attrs:{url:"/api/zone/getall"},model:{value:e.form.zone,callback:function(t){e.$set(e.form,"zone",t)},expression:"form.zone"}})],1),a("el-form-item",{attrs:{label:"等级: ",prop:"level"}},[a("el-select",{model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},e._l([1,2,3],function(e){return a("el-option",{key:e,attrs:{value:"T"+e}})}),1)],1),a("el-form-item",{attrs:{label:"电话号码：",prop:"phone",rules:{pattern:/^1[3456789]\d{9}$/},required:""}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"标签号：",prop:"tagNo",required:""}},[a("el-input",{model:{value:e.form.tagNo,callback:function(t){e.$set(e.form,"tagNo",t)},expression:"form.tagNo"}})],1),a("el-form-item",{attrs:{label:"人员类型：",prop:"type"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[e._v("常驻")]),a("el-radio",{attrs:{label:2}},[e._v("临时")])],1)],1),2===e.form.type?a("el-form-item",{attrs:{label:"添加原因："}},[a("el-input",{model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),a("el-dialog",{class:e.$style.model,attrs:{visible:e.visible,"modal-append-to-body":!1,width:"70%",top:"5vh",title:"裁剪头像"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"el-divider el-divider--horizontal",class:e.$style.divider}),a("div",{class:e.$style.btn},[a("span",{staticStyle:{"margin-right":"20px"}},[e._v("本地上传")]),a("el-upload",{attrs:{accept:"image/jpeg, image/png","auto-upload":!1,action:"","show-file-list":!1,"on-change":e.changeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),a("el-row",{staticStyle:{margin:"20px 0"}},[a("el-col",{staticStyle:{height:"400px"},attrs:{span:16,xs:24}},[e.url?a("VueCropper",{ref:"cropper",attrs:{img:e.url,autoCrop:!0,fixed:!0,fixedNumber:[1,1]},on:{realTime:e.realTime}}):a("el-upload",{staticClass:"avatar-upload",attrs:{drag:"",accept:"image/jpeg, image/png","auto-upload":!1,action:"","show-file-list":!1,"on-change":e.changeUpload}},[a("div",{class:e.$style.center},[a("div",[a("i",{staticClass:"el-icon-upload"}),a("div",{class:e.$style.tip},[e._v("\r\n                                将文件拖到此处，或\r\n                                "),a("em",{staticStyle:{color:"#66ccff"}},[e._v("选择文件")])]),a("div",{class:e.$style.tip},[e._v("\r\n                                只能上传jpg/png文件，且不超过5M\r\n                            ")])])])])],1),a("el-col",{attrs:{span:7,xs:23,offset:1}},[a("el-row",[a("el-col",{class:e.$style.preview,style:Object.assign({},e.previewBox,{zoom:200/e.preview.w}),attrs:{span:24,xs:10}},[a("div",{style:e.preview.div},[a("img",{style:e.preview.img,attrs:{src:e.preview.url}})])]),a("el-col",{class:e.$style.preview,style:Object.assign({},e.previewBox,{zoom:100/e.preview.w}),attrs:{span:24,ofsset:1,xs:8}},[a("div",{style:e.preview.div},[a("img",{style:e.preview.img,attrs:{src:e.preview.url}})])]),a("el-col",{class:e.$style.preview,style:Object.assign({},e.previewBox,{zoom:50/e.preview.w}),attrs:{span:24,ofsset:1,xs:4}},[a("div",{style:e.preview.div},[a("img",{style:e.preview.img,attrs:{src:e.preview.url}})])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6,xs:24}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],1)],1)},o=[],l=a("768b"),i=(a("ac6a"),a("5df3"),a("7f7f"),a("d225")),n=a("b0b4"),s=a("308d"),c=a("6bb5"),p=a("4e2b"),u=a("9ab4"),f=a("2fe1"),d=a("2b0e"),m=a("42de"),v=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.url="",e.visible=!1,e.changeUpload=null,e.previewBox={width:"1024px",height:"1024px"},e.preview=null,e.form={sex:1,level:"T1",type:1,reason:"",avatar:""},e}return Object(p["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){var e=this;this.changeUpload=function(t){if("image/png"!==t.raw.type&&"image/jpeg"!==t.raw.type)return e.$message.error("只能上传jpg/png文件!");if(t.size/1024/1024>5)return e.$message.error("上传文件大小不能超过 5MB!");var a=new FileReader;a.onload=function(t){e.url=t.target.result},a.readAsDataURL(t.raw)},this.preview={url:"/images/true.png",div:this.previewBox,w:1024}}},{key:"realTime",value:function(e){this.preview=e,this.previewBox={width:e.w+"px",height:e.h+"px"}}},{key:"ok",value:function(){var e=this,t=this.$refs.cropper;t.getCropData(function(t){e.form.avatar=t,e.$message.success("设置成功"),e.visible=!1})}},{key:"onSubmit",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(t){var a=e.getcanvas(e.form.avatar,e.form.name).then(function(t){return e.$http.post("/api/tag/upload/tagPhoto",{tagPhoto:t.toDataURL("image/png",1)})}),r=e.getcanvas(e.form.avatar).then(function(t){return e.$http.post("/api/tag/upload/avatar",{avatar:t.toDataURL("image/png",1)})});Promise.all([a,r]).then(function(t){var a=Object(l["a"])(t,2),r=a[0],o=a[1],i=Date.now(),n=Object.assign({createTime:i,updateTime:i,updateUser:"string",createUser:"string",locked:!0,photo:r.resultMap.photoUrl},e.form);return n.avatar=o.resultMap.avatarUrl,e.$http.post("/api/tag/addTag",n,{"Content-Type":"application/json"})}).then(function(){e.$message.success("添加成功"),e.reset()}).catch(console.log)}})}},{key:"reset",value:function(){this.$refs.form.resetFields(),this.form.avatar=""}},{key:"getcanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/images/P.png",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.createElement("canvas"),r=new Image;return r.src=e||"/images/P.png",new Promise(function(e,o){r.onload=function(){a.width=100,a.height=t?100:70;var o=a.getContext("2d");t&&("20px Arial"!==o.font&&(o.font="20px Arial"),"blue"!==o.strokeStyle&&(o.strokeStyle="blue"),"center"!==o.textAlign&&(o.textAlign="center"),o.fillText(t,50,80)),o.drawImage(r,25,10,50,50),e(a)},r.onerror=o})}}]),t}(d["default"]);v=u["a"]([Object(f["b"])({components:{"app-select":m["a"]}})],v);var b=v,g=b,h=a("a468"),y=(a("f582"),a("2877"));function w(e){this["$style"]=h["default"].locals||h["default"]}var x=Object(y["a"])(g,r,o,!1,w,null,null);t["default"]=x.exports},a468:function(e,t,a){"use strict";var r=a("c4ab"),o=a.n(r);t["default"]=o.a},c4ab:function(e,t,a){e.exports={avatar:"PeopleAdd_avatar_1etui",btn:"PeopleAdd_btn_11XCW",divider:"PeopleAdd_divider_1ZOlq",tip:"PeopleAdd_tip_Mj5IQ",center:"PeopleAdd_center_1F5UT",preview:"PeopleAdd_preview_gjrgb",model:"PeopleAdd_model_2vRVt"}},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},d944:function(e,t,a){},e853:function(e,t,a){var r=a("d3f4"),o=a("1169"),l=a("2b4c")("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?Array:t}},f582:function(e,t,a){"use strict";var r=a("d944"),o=a.n(r);o.a}}]);
//# sourceMappingURL=people0.f23ae8c2.js.map