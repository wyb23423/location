(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["system7"],{"7d65":function(t,e,a){t.exports={alert:"Submissio_alert_pkBiZ"}},"93f1":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"5%",height:"100%"}},[a("el-card",{staticClass:"card"},[a("div",{class:t.$style.alert},[t._v("协议下发 请选择")]),a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{model:t.form,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"选择基站：",prop:"base",required:""}},[a("el-cascader",{attrs:{options:t.base,props:{expandTrigger:"hover"},filterable:"","show-all-levels":!1},model:{value:t.form.base,callback:function(e){t.$set(t.form,"base",e)},expression:"form.base"}})],1),a("el-form-item",{attrs:{label:"选择协议：",prop:"protocol",required:""}},[a("el-select",{attrs:{filterable:""},model:{value:t.form.protocol,callback:function(e){t.$set(t.form,"protocol",e)},expression:"form.protocol"}},t._l(t.protocols,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"端口号："}},[a("el-radio",{attrs:{label:5e4},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",e)},expression:"form.port"}},[t._v("\n                    50000端口\n                ")]),a("el-radio",{attrs:{label:6e4},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",e)},expression:"form.port"}},[t._v("\n                    60000端口\n                ")])],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.onSubmit}},[t._v("\n                    立即提交\n                ")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1)},r=[],l=a("768b"),n=(a("ffc1"),a("ac6a"),a("7f7f"),a("d225")),s=a("b0b4"),c=a("308d"),i=a("6bb5"),u=a("4e2b"),f=a("9ab4"),p=a("2fe1"),b=a("2b0e"),m=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(c["a"])(this,Object(i["a"])(e).apply(this,arguments)),t.form={},t.base=[],t.tags=[],t.protocols=[],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){this.init(),this.getData()}},{key:"onSubmit",value:function(){var t=this,e=this.$refs.form;e.validate(function(e){if(e){Date.now();var a={ip:t.form.base[1],port:t.form.port,protocol:t.form.protocol};t.$http.post("/api/protocol/sendProtocol",a).then(function(e){t.$message.success(e.message),t.reset()}).catch(console.log)}})}},{key:"reset",value:function(){this.$refs.form.resetFields(),this.init()}},{key:"init",value:function(){this.form={base:[],port:5e4,protocol:"",tagNo:""}}},{key:"getData",value:function(){var t=this;this.$http.get("/api/base/getall",{pageSize:1e7,currentPage:1}).then(this.toTree.bind(this)).catch(console.error),this.$http.get("/api/tag/getall",{pageSize:1e7,currentPage:1}).then(function(t){return t.pagedData.datas.map(function(t){return{value:t.tagNo,label:"".concat(t.name,": ").concat(t.tagNo)}})}).then(function(e){return t.tags=e}).catch(console.error),this.$http.get("/api/protocol/getall",{pageSize:1e7,currentPage:1}).then(function(e){t.protocols=e.pagedData.datas.map(function(t){return{value:t.content,label:t.name}})}).catch(console.error)}},{key:"toTree",value:function(t){this.base.length=0;var e={};t.pagedData.datas.forEach(function(t){(e[t.groupCode]||(e[t.groupCode]=[])).push({value:t.ip,label:"".concat(t.name,": ").concat(t.baseNo,"; ").concat(t.main?"主":"从","基站")})});for(var a=0,o=Object.entries(e);a<o.length;a++){var r=Object(l["a"])(o[a],2),n=r[0],s=r[1];this.base.push({label:"分组".concat(n),children:s})}}}]),e}(b["default"]);m=f["a"]([p["b"]],m);var h=m,d=h,v=a("a810"),g=a("2877");function k(t){this["$style"]=v["default"].locals||v["default"]}var y=Object(g["a"])(d,o,r,!1,k,null,null);e["default"]=y.exports},a810:function(t,e,a){"use strict";var o=a("7d65"),r=a.n(o);e["default"]=r.a}}]);
//# sourceMappingURL=system7.5fea55ea.js.map