</html>
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>莱恩微定位</title>
	<link rel="stylesheet" href="../../../public/css/bootstrap.min.css">

	<link rel="stylesheet" type="text/css" href="../../../public/layui/css/layui.css" />
	<link rel="stylesheet" type="text/css" href="../../../public/css/style.css" />
</head>

<body class="clearfix">
	<div id="logion" class="">
		<div class="logionBack">

		</div>
		<div class="logionCont">
			<div class="">
				<h1 class="text-center">莱恩微定位</h1>
				<h3 class="text-center">后台管理登录</h3>
			</div>
			<div class="logionForm">
				<form class="layui-form" action="">
					<div class="layui-form-item">

						<div class="layui-form-item">
							<label class="layui-form-label">用户账号</label>
							<div class="layui-input-block">
								<input type="text" name="username" lay-verify="title" placeholder="请输入"
									autocomplete="off" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">用户密码</label>
							<div class="layui-input-inline">
								<input type="password" name="password" lay-verify="pass" placeholder="请输入密码"
									autocomplete="off" class="layui-input">
							</div>
							<div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-input-block" style="text-align: center;margin-left: 0;">
								<button type="submit" class="floating-btn ajax-post" lay-submit="" lay-filter="demo1"
									target-form="login-form" style="position: static">
									登录
								</button>
							</div>
						</div>
				</form>

			</div>
		</div>
	</div>
	<script src=" ../../../public/js/jquery.js"></script>
	<script src=" ../../../public/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		layui.use(['form' /*, 'layedit', 'laydate'*/ ], function () {
			var form = layui.form;
			// layer = layui.layer,
			// layedit = layui.layedit,
			// laydate = layui.laydate;

			//日期
			// laydate.render({
			// 	elem: '#date'
			// });
			// laydate.render({
			// 	elem: '#date1'
			// });

			//创建一个编辑器
			// var editIndex = layedit.build('LAY_demo_editor');

			//自定义验证规则
			form.verify({
				title: function (value) {
					if (value.length < 5) {
						return '用户名至少得5个字符啊';
					}
				},
				pass: function (value) {
					if (value.length < 6 || value.length > 12) {
						return '密码必须6到12位';
					}
				},
				// content: function (value) {
				// 	layedit.sync(editIndex);
				// }
			});

			//监听提交
			form.on('submit(demo1)', function (data) {
				fetch('/api/admin/login', {
						body: JSON.stringify(data.field),
						method: 'POST',
						headers: {
							"Content-Type": "application/json"
						}
					})
					.then(res => res.json())
					.then(res => {
						if (res.code === 200) {
							window.location.href = "../../index/view/index.html";
						} else {
							layui.layer.alert('用户账号或密码错误, 登陆失败!');
							data.form.reset();
						}
					})
					.catch(e => console.log(e));

				return false;
			});
		});
	</script>
</body>

</html>