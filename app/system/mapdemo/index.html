<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="fengMap">

    </div>
    
		<script src=" ../../../public/js/jquery.js"></script>
    <script src="../../../public/js/fengmap.min.js"></script>
    <script>
        $.ajax({
			type: "get",
			url: "/api/map/getall",
			async: true,
			data: {
				currentPage: 1,
				pageSize: 10000,
			},
			success: function (red) {
				console.log(red)
				if(red.pagedData!==null){
                
                    var filepath=red.pagedData.datas[1].filepath;
                    filepath=filepath.substring(0,filepath.length-5);
                    filepathrout=filepath.substring(0,6)
                    mapname=filepath.substring(7,filepath.length)
                    var fmapID = mapname;
                    // showAnchor(red.pagedData.datas);
                    var map = new fengmap.FMMap({
                        //渲染dom
                        container: document.getElementById('fengMap'),
                        //地图数据位置
                        mapServerURL: filepathrout,
                        //主题数据位置
                        mapThemeURL: filepathrout,
                        //设置主题
                        defaultThemeName:mapname,
                        // 默认比例尺级别设置为20级
                        defaultMapScaleLevel: 22,
                        //开启2维，3维切换的动画显示
                        defaultViewMode: fengmap.FMViewMode.MODE_2D,
                        viewModeAnimateMode: true,
                        //开发者申请应用下web服务的key
                        key: '83a75157d56ffe85317ed7ba1e8120ff',
                        //开发者申请应用名称
                        appName: 'hunjingguanchang',
                        // mapScaleRange: [200, 4000],？
                    });
                    
	                map.openMapById(fmapID);
				}
			}
		});
        
    </script>
</body>
</html>