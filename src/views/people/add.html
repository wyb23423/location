<div style="padding-left: 5%; padding-top: 3%;">
    <h3 style="color: #009688;">人员添加</h3>
    <el-form ref="form" :model="form" label-width="auto" style="width: 80%">
        <el-form-item label="头像：">
            <div @click="visible = true">
                <el-tooltip effect="dark" content="修改头像" placement="bottom-end">
                    <el-image :class="$style.avatar" :src="form.avatar || '/images/true.png'" fit="contain"></el-image>
                </el-tooltip>
            </div>
        </el-form-item>
        <el-form-item label="人员名称：" prop="name" required>
            <el-input v-model="form.name"></el-input>
        </el-form-item>
        <el-form-item label="性别：" prop="sex">
            <el-radio-group v-model="form.sex">
                <el-radio :label="1">男</el-radio>
                <el-radio :label="0">女</el-radio>
            </el-radio-group>
        </el-form-item>
        <el-form-item label="部门：" prop="department" required>
            <el-input v-model="form.department"></el-input>
        </el-form-item>
        <el-form-item label="职位：" prop="job" required>
            <el-input v-model="form.job"></el-input>
        </el-form-item>

        <el-form-item label="带领人：">
            <el-input v-model="form.leader"></el-input>
        </el-form-item>

        <el-form-item label="区域">
            <app-select url="/api/zone/getall" v-model="form.zone"></app-select>
        </el-form-item>
        <el-form-item label="等级: " prop="level">
            <el-select v-model="form.level">
                <el-option v-for="v of [1, 2, 3]" :key="v" :value="'T' + v"></el-option>
            </el-select>
        </el-form-item>

        <el-form-item label="电话号码：" prop="phone" :rules="{ pattern: /^1[3456789]\d{9}$/ }" required>
            <el-input v-model.number="form.phone" type="number"></el-input>
        </el-form-item>
        <el-form-item label="标签号：" prop="tagNo" required>
            <el-input v-model="form.tagNo"></el-input>
        </el-form-item>
        <el-form-item label="人员类型：" prop="type">
            <el-radio-group v-model="form.type">
                <el-radio :label="1">常驻</el-radio>
                <el-radio :label="2">临时</el-radio>
            </el-radio-group>
        </el-form-item>
        <el-form-item label="添加原因：" v-if="form.type === 2">
            <el-input v-model="form.reason"></el-input>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="onSubmit">立即创建</el-button>
            <el-button @click="reset">重置</el-button>
        </el-form-item>
    </el-form>

    <el-dialog :visible.sync="visible" :modal-append-to-body="false" width="70%" top="5vh" title="裁剪头像">
        <div class="el-divider el-divider--horizontal" :class="$style.divider"></div>
        <div :class="$style.btn">
            <span style="margin-right: 20px;">本地上传</span>
            <el-upload accept="image/jpeg, image/png" :auto-upload="false" action="" :show-file-list="false"
                :on-change="changeUpload">
                <el-button size="small" type="primary">选择文件</el-button>
            </el-upload>
        </div>
        <el-row style="margin: 20px 0">
            <el-col :span="16" :xs="24" style="height: 400px">
                <VueCropper ref="cropper" :img="url" :autoCrop="true" :fixed="true" :fixedNumber="[1, 1]"
                    @realTime="realTime" v-if="!!url"></VueCropper>
                <el-upload drag accept="image/jpeg, image/png" :auto-upload="false" action="" :show-file-list="false"
                    v-else class="avatar-upload" :on-change="changeUpload">
                    <div :class="$style.center">
                        <div>
                            <i class="el-icon-upload"></i>
                            <div :class="$style.tip">
                                将文件拖到此处，或
                                <em style="color: #66ccff">选择文件</em>
                            </div>
                            <div :class="$style.tip">
                                只能上传jpg/png文件，且不超过5M
                            </div>
                        </div>
                    </div>
                </el-upload>
            </el-col>

            <el-col :span="7" :xs="23" :offset="1">
                <el-row>
                    <el-col :class="$style.preview" :style="{
                            ...previewBox,
                            zoom: 200 / preview.w
                        }" :span="24" :xs="10">
                        <div :style="preview.div">
                            <img :src="preview.url" :style="preview.img" />
                        </div>
                    </el-col>
                    <el-col :class="$style.preview" :style="{
                            ...previewBox,
                            zoom: 100 / preview.w
                        }" :span="24" :ofsset="1" :xs="8">
                        <div :style="preview.div">
                            <img :src="preview.url" :style="preview.img" />
                        </div>
                    </el-col>
                    <el-col :class="$style.preview" :style="{
                            ...previewBox,
                            zoom: 50 / preview.w
                        }" :span="24" :ofsset="1" :xs="4">
                        <div :style="preview.div">
                            <img :src="preview.url" :style="preview.img" />
                        </div>
                    </el-col>
                </el-row>
            </el-col>
        </el-row>

        <el-row>
            <el-col :span="6" :xs="24">
                <el-button type="primary" style="width: 100%" @click="ok">确 定</el-button>
            </el-col>
        </el-row>
    </el-dialog>
</div>